@if (isFetching()) {
  <mat-spinner></mat-spinner>
} @else {
  @if (matchDay(); as matchDay) {
    <h3>Next Match Day - {{ matchDay.dayNumber }}</h3>
    <form #form="ngForm" (ngSubmit)="onSubmit()">
      <table mat-table [dataSource]="bets()" class="mat-elevation-z8">
        <ng-container matColumnDef="match">
          <th mat-header-cell *matHeaderCellDef> Matches </th>
          <td mat-cell *matCellDef="let element">
            <app-team-label [team]="element.match.firstTeam" />
            -
            <app-team-label [team]="element.match.secondTeam" />
          </td>
        </ng-container>

        <ng-container matColumnDef="firstTeamResult">
          <th mat-header-cell *matHeaderCellDef data-column="firstTeamResult" colspan="2">Bets</th>
          <td mat-cell *matCellDef="let element">
            <mat-form-field appearance="outline" class="compact-form-field">
              <input
                matInput
                type="number"
                min="0"
                step="1"
                [(ngModel)]="element.firstTeamResult"
                [ngModelOptions]="{standalone: true}"
                (ngModelChange)="onInputChange()"
                placeholder="0">
            </mat-form-field>
          </td>
        </ng-container>

        <ng-container matColumnDef=secondTeamResult>
          <th mat-header-cell *matHeaderCellDef data-column="secondTeamResult" hidden=""></th>
          <td mat-cell *matCellDef="let element">
            <mat-form-field appearance="outline" class="compact-form-field">
              <input
                matInput
                type="number"
                min="0"
                step="1"
                [(ngModel)]="element.secondTeamResult"
                [ngModelOptions]="{standalone: true}"
                (ngModelChange)="onInputChange()"
                placeholder="0">
            </mat-form-field>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      <button
        mat-raised-button
        color="primary"
        type="submit"
        [disabled]="isSubmitting() || !isDirty()"
      >
        Submit Bets
      </button>
    </form>
  } @else {
    <app-no-match-day title="No next Match Day" />
  }
}
